(this["webpackJsonpsobr-print"]=this["webpackJsonpsobr-print"]||[]).push([[0],{11:function(e,t,n){e.exports=n.p+"static/media/logo512.a7958246.png"},15:function(e,t,n){e.exports=n(39)},20:function(e,t,n){},37:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),l=(n(20),n(14)),i=n(5),u=n(11),s=n.n(u),p=n(12),m=(n(37),n(4)),f=n.n(m),x=n(13),d=n.n(x);var v=function(){var e=Object(p.useLocalStorage)("PSCHistory",[]),t=Object(i.a)(e,2),n=t[0],a=t[1],o=r.a.useState(!1),c=Object(i.a)(o,2),u=c[0],m=c[1],x=r.a.useRef(null),v=r.a.useCallback((function(){fetch("https://sobr.co:8888/",{method:"GET"}).then((function(e){200===e.status?m(!0):m(!1)})).catch((function(){return m(!1)}))}),[]);return r.a.useEffect((function(){v();var e=setInterval((function(){v()}),5e3);return function(){clearInterval(e)}}),[v]),r.a.useEffect((function(){var e=x.current;if(null!=e){var t=f()(e);return function(){f.a.destroy(t)}}}),[x]),r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"App-heading"},"print.sobr"),r.a.createElement("img",{src:s.a,className:"App-logo "+(u?"":"App-logo-monochrome"),alt:"logo"}),r.a.createElement("form",{className:"App-form",onSubmit:function(e){var t;e.preventDefault();var r=x.current,o=(null!==(t=null===r||void 0===r?void 0:r.value)&&void 0!==t?t:"").trim();o.length>0&&function(e){var t={id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),text:e,date:Date.now()};return fetch("https://sobr.co:8888/",{method:"POST",body:"\n\n\n"+e}).then((function(e){return 200===e.status?t:Promise.reject()}))}(o).then((function(e){a([e].concat(Object(l.a)(n))),null!=r&&(r.value="")})).catch((function(){console.error("failed to print")}))}},r.a.createElement("label",{className:"App-hidden",htmlFor:"text"},"Text to print:"),r.a.createElement("textarea",{disabled:!u,className:"App-text",id:"text",ref:x}),r.a.createElement("div",null,r.a.createElement("input",{disabled:!u,type:"submit",className:"App-form-button button "+(u?"button-primary":"disabled"),value:"Print"}),r.a.createElement("input",{disabled:!u,type:"button",className:"App-form-buttom button"+(u?"":"disabled"),onClick:function(e){e.preventDefault();var t=x.current;null!=t&&(t.value="")},value:"Clear"}))),r.a.createElement("ul",{className:"App-history"},n.map((function(e){return r.a.createElement("li",{className:"App-li",key:e.id},r.a.createElement("a",{href:"#",onClick:function(t){return function(e,t){e.preventDefault();var n=x.current;null!=n&&(n.value=t.text)}(t,e)},className:"App-job"},r.a.createElement("span",{className:"App-job-text"},e.text),r.a.createElement("span",{className:"App-job-date"},d()(e.date).fromNow())))}))),r.a.createElement("a",{className:"App-clearHistory button",href:"#",onClick:function(e){e.preventDefault(),a([])}},"Clear History"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.7dca873a.chunk.js.map