(this["webpackJsonpsobr-print"]=this["webpackJsonpsobr-print"]||[]).push([[0],{11:function(e,t,a){e.exports=a.p+"static/media/logo512.a7958246.png"},15:function(e,t,a){e.exports=a(39)},20:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),l=(a(20),a(14)),i=a(5),s=a(11),u=a.n(s),p=a(12),m=(a(37),a(4)),f=a.n(m),x=a(13),d=a.n(x);var v=function(){var e=Object(p.useLocalStorage)("PSCHistory",[]),t=Object(i.a)(e,2),a=t[0],n=t[1],o=r.a.useState(!1),c=Object(i.a)(o,2),s=c[0],m=c[1],x=r.a.useRef(null),v=r.a.useCallback((function(){fetch("https://thermal.sobr.co/",{method:"GET"}).then((function(e){200===e.status?m(!0):m(!1)})).catch((function(){return m(!1)}))}),[]);return r.a.useEffect((function(){v();var e=setInterval((function(){v()}),5e3);return function(){clearInterval(e)}}),[v]),r.a.useEffect((function(){var e=x.current;if(null!=e){var t=f()(e);return function(){f.a.destroy(t)}}}),[x]),r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"App-heading"},"print.sobr.co"),r.a.createElement("img",{src:u.a,className:"App-logo "+(s?"":"App-logo-monochrome"),alt:"logo"}),r.a.createElement("div",{className:"App-status"},s?"(ready to print)":"(printer offline)"),r.a.createElement("form",{className:"App-form",onSubmit:function(e){var t;e.preventDefault();var r=x.current,o=(null!==(t=null===r||void 0===r?void 0:r.value)&&void 0!==t?t:"").trim();o.length>0&&function(e){var t={id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),text:e,date:Date.now()};return fetch("https://thermal.sobr.co/",{method:"POST",body:"\n"+e}).then((function(e){return 200===e.status?t:Promise.reject()}))}(o).then((function(e){n([e].concat(Object(l.a)(a))),null!=r&&(r.value="")})).catch((function(){console.error("failed to print")}))}},r.a.createElement("label",{className:"App-hidden",htmlFor:"text"},"Text to print:"),r.a.createElement("textarea",{disabled:!s,className:"App-text",id:"text",ref:x}),r.a.createElement("div",null,r.a.createElement("input",{disabled:!s,type:"submit",className:"App-form-button button "+(s?"button-primary":"disabled"),value:"Print"}),r.a.createElement("input",{disabled:!s,type:"button",className:"App-form-buttom button"+(s?"":"disabled"),onClick:function(e){e.preventDefault();var t=x.current;null!=t&&(t.value="")},value:"Clear"}))),r.a.createElement("ul",{className:"App-history"},a.map((function(e){return r.a.createElement("li",{className:"App-li",key:e.id},r.a.createElement("a",{href:"#",onClick:function(t){return function(e,t){e.preventDefault();var a=x.current;null!=a&&(a.value=t.text)}(t,e)},className:"App-job"},r.a.createElement("span",{className:"App-job-text"},e.text),r.a.createElement("span",{className:"App-job-date"},d()(e.date).fromNow())))}))),r.a.createElement("a",{className:"App-clearHistory button",href:"#",onClick:function(e){e.preventDefault(),n([])}},"Clear History"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.dc7c3ba1.chunk.js.map